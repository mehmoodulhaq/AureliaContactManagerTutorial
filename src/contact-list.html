<template>
    <div class="contact-list">
        <ul class="list-group">
            <li repeat.for="contact of contacts" 
            class="list-group-item 
            ${contact.id === $parent.selectedId ? 'active' : ''}">
                <a route-href="route: contacts; params.bind: {id:contact.id}" 
                click.delegate="$parent.select(contact)">
                    <h4 class="list-group-item-heading">
                        ${contact.firstName} ${contact.lastName}</h4>
                    <p class="list-group-item-text">
                        ${contact.email}</p>
                </a>
            </li>
        </ul>
    </div>
</template>


<!--


    export class ContactList {
  contacts;
  selectedId = 0;

  constructor(private api: WebAPI, ea: EventAggregator){
    ea.subscribe(ContactViewed, msg => this.select(msg.contact));
    ea.subscribe(ContactUpdated, msg => {
      let id = msg.contact.id;
      let found = this.contacts.find(x => x.id == id);
      Object.assign(found, msg.contact);
    });
  }

  created(){
    this.api.getContactList().then(contacts => this.contacts = contacts);
  }

  select(contact){
    this.selectedId = contact.id;
    return true;
  }
}
-->